{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Pinia store for managing favorite restaurants and items with persistent storage in localStorage. It includes methods for adding, removing, toggling favorites, and persisting state with debounce.", "external_files": ["pinia", "vue", "@/types"], "external_methods": ["defineStore"], "published": ["useFavoritesStore"], "classes": [], "methods": [{"name": "function canUseStorage(): boolean { canUseStorage", "description": "Checks if localStorage is available in the current environment.", "scope": "", "scopeKind": ""}, {"name": "function loadPersisted(): FavoritesState | null { loadPersisted", "description": "Loads persisted favorites state from localStorage.", "scope": "", "scopeKind": ""}, {"name": "function createDebouncedSaver<T>(fn: (s: T) => void, delay = 250) { createDebouncedSaver", "description": "Creates a debounced function to save state to localStorage, reducing write frequency.", "scope": "", "scopeKind": ""}, {"name": "persistNow", "description": "Immediately persists current favorites state to localStorage."}, {"name": "function addItem(fav: FavoriteItem) { addItem", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function removeItem(id: string) { removeItem", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function toggleItem(fav: FavoriteItem) { toggleItem", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function toggleRestaurant(fav: FavoriteRestaurant) { toggleRestaurant", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["window.localStorage.getItem", "window.localStorage.setItem", "window.clearTimeout", "window.setTimeout"], "search-terms": ["Pinia favorites store", "localStorage favorites persistence", "debounced save favorites", "Vue computed favorites", "favorites toggle", "favorited restaurants", "favorited items"], "state": 2, "file_id": 23, "knowledge_revision": 100, "git_revision": "639d0e7d3948f2c942493fe6359c8247bac0bdb5", "revision_history": [{"63": ""}, {"100": "639d0e7d3948f2c942493fe6359c8247bac0bdb5"}], "ctags": [{"_type": "tag", "name": "FavoritesState", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^type FavoritesState = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^const STORAGE_KEY = 'favorites_state_v1'$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "addItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  function addItem(fav: FavoriteItem) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "canUseStorage", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^function canUseStorage(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createDebouncedSaver", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^function createDebouncedSaver<T>(fn: (s: T) => void, delay = 250) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "itemList", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  const itemList = computed(() => Object.values(items.value))$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "loadPersisted", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^function loadPersisted(): FavoritesState | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^    const next = { ...items.value }$/", "language": "TypeScript", "kind": "constant", "scope": "removeItem", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^    const next = { ...restaurants.value }$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "persistDebounced", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  const persistDebounced = createDebouncedSaver<FavoritesState>(persistNow, 250)$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "persistNow", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  const persistNow = (state: FavoritesState) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^    const raw = window.localStorage.getItem(STORAGE_KEY)$/", "language": "TypeScript", "kind": "constant", "scope": "loadPersisted", "scopeKind": "function"}, {"_type": "tag", "name": "removeItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  function removeItem(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "restaurantList", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  const restaurantList = computed(() => Object.values(restaurants.value))$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "toggleItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  function toggleItem(fav: FavoriteItem) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "toggleRestaurant", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^  function toggleRestaurant(fav: FavoriteRestaurant) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "useFavoritesStore", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/stores/favorites.ts", "pattern": "/^export const useFavoritesStore = defineStore('favorites', () => {$/", "language": "TypeScript", "kind": "constant"}], "hash": "8bf5b6c95bd70ae49646dc1cda92b636", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/stores/favorites.ts"}