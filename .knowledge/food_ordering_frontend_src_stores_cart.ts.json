{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Pinia store for managing a shopping cart in a Vue.js application, including cart state, item management, coupon application, and price calculations.", "external_files": ["@/types", "@/services/coupons", "@/services/pricing", "@/services/couponsAdmin", "@/types/coupons", "@/services/pricingConfig"], "external_methods": ["computeTotals", "lineSubtotal", "safeRound2", "computeDeliveryFee", "couponMeetsSubtotal", "findByCode", "validateCouponWithContext", "getDeliveryPricingOptions", "getLocalTimezone"], "published": ["useCartStore"], "classes": [], "methods": [{"name": "canUseStorage", "description": "Checks if localStorage can be used in the current environment."}, {"name": "loadPersisted", "description": "Loads cart state from localStorage if available."}, {"name": "getDefaultTaxRate", "description": "Retrieves the default tax rate from environment variables or defaults to 0.0."}, {"name": "addItem", "description": "Adds a food item to the cart or increases its quantity."}, {"name": "schedulePersistDebounced", "description": "Debounces persistence of cart state to avoid excessive storage writes."}, {"name": "updateQty", "description": "Updates the quantity of a cart line item, removing it if quantity <= 0."}, {"name": "removeItem", "description": "Removes a specific item from the cart."}, {"name": "clear", "description": "Clears all cart items and applied coupons."}, {"name": "applyCoupon", "description": "Validates and applies a coupon code, updating cart state if valid."}, {"name": "removeCoupon", "description": "Removes any applied coupon from the cart."}, {"name": "deriveRestaurantIdsFromLines", "description": "Extracts unique restaurant IDs from cart lines."}], "calls": ["asyncValidateCoupon", "findCouponByCode", "validateCouponWithContext", "couponMeetsSubtotal", "getDeliveryPricingOptions", "getLocalTimezone", "computeDeliveryFee", "computeTotals", "lineSubtotal", "safeRound2"], "search-terms": ["Pinia cart store", "Vue cart management", "coupon validation", "price calculation", "localStorage persistence", "delivery fee calculation"], "state": 2, "file_id": 22, "knowledge_revision": 312, "git_revision": "6122d2fdc0c85ff80fe1fdd913b925f6ea156f24", "revision_history": [{"47": ""}, {"66": "fa51b25a5136c2a213cbe729e4337be0c6b04b4d"}, {"70": "639d0e7d3948f2c942493fe6359c8247bac0bdb5"}, {"236": "cf147ccfbaa9c81ba6b561ab246528cdc11c70ac"}, {"240": "59eba850def3898853840af7e03ece5eabf7887a"}, {"241": "59eba850def3898853840af7e03ece5eabf7887a"}, {"312": "6122d2fdc0c85ff80fe1fdd913b925f6ea156f24"}], "ctags": [], "filename": "food_ordering_frontend/src/stores/cart.ts", "format-version": 4, "code-base-name": "https://github.com/kavia-common/easy-food-order-221713-221722.git:kavia-main"}