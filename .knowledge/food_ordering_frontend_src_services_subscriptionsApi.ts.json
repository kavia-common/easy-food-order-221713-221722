{"is_source_file": true, "format": "TypeScript", "description": "This file provides API functions for managing user subscriptions, including fetching plans, current subscription, subscribing, canceling, and retrieving perks. It uses local storage as a fallback when API calls fail or are unavailable.", "external_files": ["@/types/subscriptions"], "external_methods": ["fetch"], "published": ["listPlans", "getCurrentSubscription", "subscribe", "cancelSubscription", "getPerks"], "classes": [], "methods": [{"name": "listPlans", "description": "Returns available subscription plans, using API if available, otherwise local mock with caching."}, {"name": "getCurrentSubscription", "description": "Returns current user subscription from API if present, else local storage mock."}, {"name": "subscribe", "description": "Subscribes to a plan; uses API or falls back to local storage mock."}, {"name": "cancelSubscription", "description": "Cancels current subscription; marks status 'canceled' in mock if API is unavailable."}, {"name": "getPerks", "description": "Retrieves perks for current user subscription."}], "calls": ["fetch", "normalizeApiBase", "fetchFromApi", "loadPlansFromStorage", "loadUserSubFromStorage", "persistPlans", "persistUserSub", "listPlans", "getCurrentSubscription", "subscribe", "cancelSubscription"], "search-terms": ["subscriptions", "localStorage", "mockPlans", "subscription plans", "user subscription", "subscription perks", "fallback"], "state": 2, "file_id": 36, "knowledge_revision": 321, "git_revision": "abecf9ced63be25963010603f6ddbe44f472819d", "revision_history": [{"122": ""}, {"191": "222638623460685c384db599cd7b795a0c3616d8"}, {"200": "ef85c21ea4ed8dfbec99666038bc8f94558191b0"}, {"321": "abecf9ced63be25963010603f6ddbe44f472819d"}], "ctags": [], "filename": "food_ordering_frontend/src/services/subscriptionsApi.ts", "format-version": 4, "code-base-name": "https://github.com/kavia-common/easy-food-order-221713-221722.git:kavia-main"}