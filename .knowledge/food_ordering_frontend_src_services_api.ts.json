{"is_source_file": true, "format": "TypeScript", "description": "This file contains a set of API service functions for a food ordering frontend application, including functions for fetching categories, items, restaurant profiles, managing menus, and placing orders. It handles both real backend API calls and mock data fallback, with caching mechanisms and environment-based configuration.", "external_files": ["@/types", "@/types/restaurantProfile", "@/types/restaurant"], "external_methods": ["fetch", "new URL", "import", "Promise", "setTimeout", "JSON.stringify", "JSON.parse", "window.location.origin", "Math.random", "Date.now", "crypto.randomUUID"], "published": ["getApiBase", "fetchCategories", "fetchItems", "fetchItemById", "createOrder", "submitOrder", "fetchRestaurantProfile", "fetchRestaurants", "listMenuItems", "createMenuItem", "updateMenuItem", "updateAvailability", "featureFlags"], "classes": [], "methods": [{"name": "function isValidBaseUrl(v: unknown): v is string { isValidBaseUrl", "description": "Validates that the input string is a proper URL or relative path, allowing http(s) URLs and relative URLs used in development.", "scope": "", "scopeKind": ""}, {"name": "export function getApiBase(): string | undefined { getApiBase", "description": "Retrieves the API base URL from environment variables if it's valid.", "scope": "", "scopeKind": ""}, {"name": "function getFlags(): Record<string, boolean> { getFlags", "description": "Parses feature flags from environment variables, supporting CSV and JSON formats.", "scope": "", "scopeKind": ""}, {"name": "shouldUseMock", "description": "Determines whether to use mock data based on environment variables and API base URL."}, {"name": "async function importMock() { importMock", "description": "Dynamically imports mock data module.", "scope": "", "scopeKind": ""}, {"name": "itemsKey", "description": "Generates a cache key based on item fetch parameters."}, {"name": "restaurantsKey", "description": "Generates a cache key based on restaurant query parameters."}, {"name": "export async function fetchCategories(restaurantId?: string): Promise<FoodCategory[]> { fetchCategories", "description": "Fetches food categories for a specified restaurant, with caching and mock fallback.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchItems( fetchItems", "description": "Fetches food items with optional filters, using caching and mock fallback.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchItemById(itemId: string, restaurantId?: string): Promise<FoodItem | n/ fetchItemById", "description": "Fetches a single food item by ID, optionally restaurant scoped, with caching and mock fallback.", "scope": "", "scopeKind": ""}, {"name": "async function mockOrderSuccess(): Promise<OrderResponse> { mockOrderSuccess", "description": "Simulates a successful order response with a delay for testing.", "scope": "", "scopeKind": ""}, {"name": "export async function createOrder(payload: OrderPayload): Promise<OrderResponse> { createOrder", "description": "Creates an order, with mock fallback, sending data to API endpoint if available.", "scope": "", "scopeKind": ""}, {"name": "submitOrder", "description": "Backward-compatible wrapper that delegates to createOrder."}, {"name": "export async function fetchRestaurantProfile(restaurantId: string): Promise<RestaurantProfile> { fetchRestaurantProfile", "description": "Fetches and caches a restaurant profile, with mock fallback.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchRestaurants(query: RestaurantQuery = {}): Promise<Restaurant[]> { fetchRestaurants", "description": "Fetches a list of restaurants, applies client-side filtering and sorting, with caching and mock fallback.", "scope": "", "scopeKind": ""}, {"name": "export async function listMenuItems(restaurantId: string): Promise<CustomerItem[]> { listMenuItems", "description": "Lists menu items for a restaurant, including availability, with caching and mock data.", "scope": "", "scopeKind": ""}, {"name": "export async function createMenuItem( createMenuItem", "description": "Creates a new menu item for a restaurant, invalidates cache, supports mock fallback.", "scope": "", "scopeKind": ""}, {"name": "updateMenuItem", "description": "Updates an existing menu item, invalidates cache, supports mock fallback."}, {"name": "updateAvailability", "description": "Updates the availability status of a menu item, with cache invalidation, supports mock fallback."}, {"name": "function applyDefaultAvailability(item: CustomerItem): CustomerItem { applyDefaultAvailability", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function lsGet<T>(key: string): T | null { lsGet", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function lsSet<T>(key: string, val: T): void { lsSet", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "new URL", "import", "setTimeout", "JSON.stringify", "JSON.parse", "fetchRestaurants", "import('@/services/mockData')", "getMockCategoriesForRestaurant", "getMockItems", "getMockItemById", "getMockProfileById", "fetchRestaurants", "getMockRestaurants", "fetch", "setTimeout", "import('@/services/mockData')", "getMockProfileById"], "search-terms": ["api service", "food categories", "food items", "restaurant profile", "menu management", "mock fallback", "caching", "environment config", "order creation", "order response"], "state": 2, "file_id": 19, "knowledge_revision": 160, "git_revision": "70569db63a9407628ce40da9eb51b9bf47307f2f", "revision_history": [{"41": ""}, {"49": "fa51b25a5136c2a213cbe729e4337be0c6b04b4d"}, {"50": "fa51b25a5136c2a213cbe729e4337be0c6b04b4d"}, {"53": "080dcebf5014d88192e81b4b55bca22f8703ca31"}, {"54": "080dcebf5014d88192e81b4b55bca22f8703ca31"}, {"57": "35883df6824081e2e752a88ef30ca7139d55531b"}, {"59": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"60": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"61": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"72": "7d8d49548b0644d9213c7461f95715f9a2629b00"}, {"73": "7d8d49548b0644d9213c7461f95715f9a2629b00"}, {"85": "410e1f03e40348cb83039a8db9b0f1f0046cad67"}, {"109": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"110": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"111": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"115": "e506a7250757c6c020275949ac7a902f4831d2be"}, {"153": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"154": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"156": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"157": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"160": "70569db63a9407628ce40da9eb51b9bf47307f2f"}], "ctags": [{"_type": "tag", "name": "LS_KEYS", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const LS_KEYS = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "applyClientSide", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const applyClientSide = (list: Restaurant[]): Restaurant[] => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "applyDefaultAvailability", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function applyDefaultAvailability(item: CustomerItem): CustomerItem {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "availability", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    availability: payload.availability ?? 'in_stock',$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "availability", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const updated: CustomerItem = { ...list[idx], availability: status }$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = import.meta.env.VITE_API_BASE || import.meta.env.VITE_BACKEND_URL$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "baseR", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const baseR = list.find(r => r.id === restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "baseR", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const baseR = list.find(r => r.id === restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "baseUrl", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const baseUrl = restaurantId$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "cache", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const cache = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.categoriesByRestaurant.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.itemByKey.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.itemsByKey.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.restaurantsByQuery.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "cachedLs", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cachedLs = lsGet<RestaurantProfile>(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "cachedMem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cachedMem = cache.profileById.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "category", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    category: payload.category,$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "const", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list, item]$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "createMenuItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function createMenuItem($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function createOrder(payload: OrderPayload): Promise<OrderResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "created", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const created = (await res.json()) as CustomerItem$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^          const data = (await res.json()) as CustomerItem[]$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data = (await res.json()) as CustomerItem$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data = (await res.json()) as CustomerItem$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data = await importMock()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data = await importMock()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data = await importMock()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data = await importMock()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data = mock.getMockProfileById(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const data: RestaurantProfile = await res.json()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    description: payload.description,$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "featureFlags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export const featureFlags = flags$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "fetchCategories", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchCategories(restaurantId?: string): Promise<FoodCategory[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchItemById", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchItemById(itemId: string, restaurantId?: string): Promise<FoodItem | n/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchItems($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchRestaurantProfile", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchRestaurantProfile(restaurantId: string): Promise<RestaurantProfile> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchRestaurants", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchRestaurants(query: RestaurantQuery = {}): Promise<Restaurant[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const forced = typeof flags.enableMockAPI === 'boolean' ? flags.enableMockAPI : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const flags = getFlags()$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "flagsRaw", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const flagsRaw = import.meta.env.VITE_FEATURE_FLAGS$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "forced", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const forced = typeof flags.enableMockAPI === 'boolean' ? flags.enableMockAPI : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function getApiBase(): string | undefined {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getFlags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function getFlags(): Record<string, boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const id = typeof crypto !== 'undefined' && 'randomUUID' in crypto ? crypto.randomUUID() : `${/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const idx = list.findIndex(i => i.id === itemId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const idx = list.findIndex(i => i.id === itemId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const updated: CustomerItem = { ...list[idx], availability: status }$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "if", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^          if (!res.ok) throw new Error('Failed to fetch menu')$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "if", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      if (!res.ok) throw new Error('Failed to fetch categories')$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "if", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      if (!res.ok) throw new Error(`Profile fetch failed: ${res.status}`)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "image", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    image: payload.image,$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "importMock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^async function importMock() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "isValidBaseUrl", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function isValidBaseUrl(v: unknown): v is string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const item: CustomerItem = {$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list, item]$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "itemsKey", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function itemsKey(params: { categoryId?: string; search?: string; restaurantId?: string; healthF/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const [k, v] = kv.split('=')$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const key = LS_KEYS.MENU(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `${restaurantId || ''}::${itemId}`$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `profile:${restaurantId}`$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = itemsKey({ categoryId, search, restaurantId, healthFilters: options?.healthFilters/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = restaurantsKey(query)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const list = await fetchRestaurants()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const list = await fetchRestaurants()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "listMenuItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function listMenuItems(restaurantId: string): Promise<CustomerItem[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "lsGet", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function lsGet<T>(key: string): T | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "lsSet", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        lsSet(key, minimal)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "lsSet", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      lsSet(key, minimal)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "lsSet", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function lsSet<T>(key: string, val: T): void {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "mem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const mem = cache.customerMenuByRestaurant.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "minimal", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const minimal: RestaurantProfile = {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "minimal", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const minimal: RestaurantProfile = {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "mock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const mock = await importMock()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "mock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const mock = await importMock()$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "mockOrderSuccess", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^async function mockOrderSuccess(): Promise<OrderResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^          name: baseR?.name || `Restaurant ${restaurantId}`,$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        name: baseR?.name || `Restaurant ${restaurantId}`,$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    name: payload.name,$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list, item]$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list]$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list]$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const obj: Record<string, boolean> = {}$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const origin = typeof window !== 'undefined' ? window.location.origin : 'http:\\/\\/localhos/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const p = Promise.resolve(cachedLs)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}], "hash": "111c0a12833b1ab06606067ed7224514", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/services/api.ts"}