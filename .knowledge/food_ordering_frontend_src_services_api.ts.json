{"is_source_file": true, "format": "TypeScript", "description": "A service module providing API functions for a food ordering frontend, including fetching categories, items, restaurants, managing menus, creating orders, and handling inventory (mocked). It also includes utility functions and mock data integration.", "external_files": ["@/types", "@/types/restaurantProfile", "@/types/restaurant", "./mockData", "./mockData.inventory"], "external_methods": ["getMockCategoriesForRestaurant", "getMockItems", "getMockItemById", "mockRestaurants", "loadRestaurants", "getStock", "setStock", "autoUpdateAvailability"], "published": ["fetchCategories", "fetchItems", "fetchItemById", "getStock", "setStock", "reserveLocal", "getDisplayStock", "createOrder", "submitOrder", "flags", "fetchRestaurantProfile", "fetchRestaurants", "listMenuItems", "createMenuItem", "updateMenuItem", "updateAvailability", "OrdersApi"], "classes": [], "methods": [{"name": "function isValidBaseUrl(v: unknown): v is string { isValidBaseUrl", "description": "Utility to validate if a given value is a valid URL string.", "scope": "", "scopeKind": ""}, {"name": "export function getApiBase(): string | undefined { getApiBase", "description": "Retrieves the API base URL from environment variables if valid.", "scope": "", "scopeKind": ""}, {"name": "function getFlags(): Record<string, boolean> { getFlags", "description": "Parses feature flags from environment variables.", "scope": "", "scopeKind": ""}, {"name": "function shouldUseMock(): boolean { shouldUseMock", "description": "Determines whether to use mock data based on environment and flags.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchCategories(restaurantId?: string): Promise<FoodCategory[]> { fetchCategories", "description": "Fetches food categories for a restaurant or globally, with caching.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchItems( fetchItems", "description": "Fetches food items based on filters like category, search term, restaurant, health filters, and calories, with caching.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchItemById(itemId: string, restaurantId?: string): Promise<FoodItem | n/ fetchItemById", "description": "Fetches a specific food item by ID, optionally within a restaurant, with caching.", "scope": "", "scopeKind": ""}, {"name": "async function mockOrderSuccess(): Promise<OrderResponse> { mockOrderSuccess", "description": "Generates a mock successful order response after a delay.", "scope": "", "scopeKind": ""}, {"name": "export function getStock(restaurantId: string, itemId: string) { getStock", "description": "Gets the current stock count for a specific restaurant item from inventory (mocked).", "scope": "", "scopeKind": ""}, {"name": "export function setStock(restaurantId: string, itemId: string, qty: number) { setStock", "description": "Sets the stock count for a specific restaurant item in inventory (mocked).", "scope": "", "scopeKind": ""}, {"name": "export function reserveLocal(restaurantId: string, itemId: string, qty = 1) { reserveLocal", "description": "Reserves a specified quantity of an item locally in the frontend.", "scope": "", "scopeKind": ""}, {"name": "export function getDisplayStock(restaurantId: string, itemId: string) { getDisplayStock", "description": "Calculates available display stock, considering real stock and local reservations.", "scope": "", "scopeKind": ""}, {"name": "export async function createOrder(payload: OrderPayload): Promise<OrderResponse> { createOrder", "description": "Creates a new order with given payload; mocks response if in mock mode.", "scope": "", "scopeKind": ""}, {"name": "submitOrder", "description": "Alias for createOrder to submit a new order."}, {"name": "export async function fetchRestaurantProfile(restaurantId: string): Promise<RestaurantProfile> { fetchRestaurantProfile", "description": "Retrieves profile information for a restaurant.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchRestaurants(query: RestaurantQuery = {}): Promise<Restaurant[]> { fetchRestaurants", "description": "Retrieves list of restaurants based on query filters.", "scope": "", "scopeKind": ""}, {"name": "export async function listMenuItems(restaurantId: string): Promise<CustomerItem[]> { listMenuItems", "description": "Lists menu items for a restaurant from stored or mock data.", "scope": "", "scopeKind": ""}, {"name": "export async function createMenuItem( createMenuItem", "description": "Creates a new menu item and adds it to local storage.", "scope": "", "scopeKind": ""}, {"name": "updateMenuItem", "description": "Updates an existing menu item in local storage."}, {"name": "export async function updateAvailability( updateAvailability", "description": "Updates the availability status of a menu item.", "scope": "", "scopeKind": ""}, {"name": "function applyClientSide(list: Restaurant[], query: RestaurantQuery) { applyClientSide", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function applyDefaultAvailability(item: CustomerItem): CustomerItem { applyDefaultAvailability", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function attachMenusToRestaurants(base: Restaurant[]): Restaurant[] { attachMenusToRestaurants", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function findRestaurantAndItem(rests: Restaurant[], itemId: string): { restaurantId: string; ite/ findRestaurantAndItem", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function readCustomerMenu(restaurantId: string): Promise<CustomerItem[]> { readCustomerMenu", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function restaurantsKey(query: RestaurantQuery = {}) { restaurantsKey", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getMockCategoriesForRestaurant", "getMockItems", "getMockItemById", "invLoad", "invGet", "invSet", "invAuto", "applyClientSide", "safeStorage", "fetch", "attachMenusToRestaurants", "findRestaurantAndItem"], "search-terms": ["api", "food", "category", "item", "restaurant", "menu", "inventory", "mockData", "order", "createOrder", "fetch"], "state": 2, "file_id": 19, "knowledge_revision": 172, "git_revision": "705df92d392b8a455258cec559766c654947ff8b", "revision_history": [{"41": ""}, {"49": "fa51b25a5136c2a213cbe729e4337be0c6b04b4d"}, {"50": "fa51b25a5136c2a213cbe729e4337be0c6b04b4d"}, {"53": "080dcebf5014d88192e81b4b55bca22f8703ca31"}, {"54": "080dcebf5014d88192e81b4b55bca22f8703ca31"}, {"57": "35883df6824081e2e752a88ef30ca7139d55531b"}, {"59": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"60": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"61": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"72": "7d8d49548b0644d9213c7461f95715f9a2629b00"}, {"73": "7d8d49548b0644d9213c7461f95715f9a2629b00"}, {"85": "410e1f03e40348cb83039a8db9b0f1f0046cad67"}, {"109": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"110": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"111": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"115": "e506a7250757c6c020275949ac7a902f4831d2be"}, {"153": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"154": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"156": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"157": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"160": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"168": "705df92d392b8a455258cec559766c654947ff8b"}, {"171": "705df92d392b8a455258cec559766c654947ff8b"}, {"172": "705df92d392b8a455258cec559766c654947ff8b"}], "ctags": [{"_type": "tag", "name": "LS_KEYS", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const LS_KEYS = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "a", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const av = key === 'price' ? a.priceLevel : key === 'distance' ? a.distanceKm : a.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "applyClientSide", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function applyClientSide(list: Restaurant[], query: RestaurantQuery) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "applyDefaultAvailability", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function applyDefaultAvailability(item: CustomerItem): CustomerItem {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "attachMenusToRestaurants", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function attachMenusToRestaurants(base: Restaurant[]): Restaurant[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "av", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const av = key === 'price' ? a.priceLevel : key === 'distance' ? a.distanceKm : a.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "b", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const bv = key === 'price' ? b.priceLevel : key === 'distance' ? b.distanceKm : b.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const base = invLoad(attachMenusToRestaurants(mockRestaurants))$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = import.meta.env.VITE_API_BASE || import.meta.env.VITE_BACKEND_URL$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "baseUrl", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const baseUrl = restaurantId$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "bv", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const bv = key === 'price' ? b.priceLevel : key === 'distance' ? b.distanceKm : b.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "c", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const c = String(query.cuisine).toLowerCase()$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "cache", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const cache = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.categoriesByRestaurant.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.itemByKey.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.itemsByKey.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.restaurantsByQuery.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "createMenuItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function createMenuItem($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function createOrder(payload: OrderPayload): Promise<OrderResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const current = invGet(restaurantId, itemId) ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "dir", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const dir = query.sortDir === 'asc' ? 1 : -1$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "enriched", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const enriched = invDefaults(item as any)$/", "language": "TypeScript", "kind": "constant", "scope": "applyDefaultAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "featureFlags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export const featureFlags = flags$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "fetchCategories", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchCategories(restaurantId?: string): Promise<FoodCategory[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchItemById", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchItemById(itemId: string, restaurantId?: string): Promise<FoodItem | n/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchItems($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchRestaurantProfile", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchRestaurantProfile(restaurantId: string): Promise<RestaurantProfile> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchRestaurants", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchRestaurants(query: RestaurantQuery = {}): Promise<Restaurant[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "findRestaurantAndItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function findRestaurantAndItem(rests: Restaurant[], itemId: string): { restaurantId: string; ite/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const forced = typeof flags.enableMockAPI === 'boolean' ? flags.enableMockAPI : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const flags = getFlags()$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "flagsRaw", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const flagsRaw = import.meta.env.VITE_FEATURE_FLAGS$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "forced", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const forced = typeof flags.enableMockAPI === 'boolean' ? flags.enableMockAPI : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "found", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const found = findRestaurantAndItem(base, line.id)$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function getApiBase(): string | undefined {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getDisplayStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function getDisplayStock(restaurantId: string, itemId: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getFlags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function getFlags(): Record<string, boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function getStock(restaurantId: string, itemId: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const id = typeof crypto !== 'undefined' && 'randomUUID' in crypto ? crypto.randomUUID() : `${/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const idx = list.findIndex(i => i.id === itemId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const idx = list.findIndex(i => i.id === itemId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "isValidBaseUrl", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function isValidBaseUrl(v: unknown): v is string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const item: CustomerItem = applyDefaultAvailability({$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list, item]$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "itemId", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const { restaurantId, itemId } = found$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const items: CustomerItem[] = JSON.parse(raw)$/", "language": "TypeScript", "kind": "constant", "scope": "attachMenusToRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "itemsKey", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function itemsKey(params: { categoryId?: string; search?: string; restaurantId?: string; healthF/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const [k, v] = kv.split('=')$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const key = query.sortBy$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `${restaurantId || ''}::${itemId}`$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `${restaurantId}:${itemId}`$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `${restaurantId}:${itemId}`$/", "language": "TypeScript", "kind": "constant", "scope": "reserveLocal", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = itemsKey({ categoryId, search, restaurantId, healthFilters: options?.healthFilters/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = restaurantsKey(query)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const reserved = localReservations[key] ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "line", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    for (const line of payload.items) {$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "listMenuItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function listMenuItems(restaurantId: string): Promise<CustomerItem[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "localReservations", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const localReservations: Record<string, number> = {}$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "mem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const mem = cache.customerMenuByRestaurant.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "menu", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const menu: CustomerItem[] | undefined = r.menu$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "mockOrderSuccess", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^async function mockOrderSuccess(): Promise<OrderResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list, item]$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list]$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list]$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const obj: Record<string, boolean> = {}$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const origin = typeof window !== 'undefined' ? window.location.origin : 'http:\\/\\/localhos/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = Promise.resolve(applyClientSide(mockRestaurants, query))$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = cache.profileById.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const q = Promise.resolve({$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "r", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  for (const r of rests as unknown as Array<Restaurant & { menu?: CustomerItem[] }>) {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const raw = store.getItem(LS_KEYS.MENU(r.id))$/", "language": "TypeScript", "kind": "constant", "scope": "attachMenusToRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "readCustomerMenu", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^async function readCustomerMenu(restaurantId: string): Promise<CustomerItem[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "real", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const real = getStock(restaurantId, itemId) ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const res = await fetch(`${String(base).replace(\\/\\\\\\/*$\\/, '')}\\/orders`, {$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "reserveLocal", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function reserveLocal(restaurantId: string, itemId: string, qty = 1) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "reserved", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const reserved = localReservations[key] ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "restaurantId", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const { restaurantId, itemId } = found$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "restaurantsKey", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function restaurantsKey(query: RestaurantQuery = {}) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "safeStorage", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function safeStorage(): Storage | null {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "setStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function setStock(restaurantId: string, itemId: string, qty: number) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "shouldUseMock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function shouldUseMock(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const store = safeStorage()$/", "language": "TypeScript", "kind": "constant", "scope": "attachMenusToRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "store", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const store = safeStorage()$/", "language": "TypeScript", "kind": "constant", "scope": "writeCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "updateAvailability", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function updateAvailability($/", "language": "TypeScript", "kind": "function"}], "hash": "023260e871c92e415291574a22e925f4", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/services/api.ts"}