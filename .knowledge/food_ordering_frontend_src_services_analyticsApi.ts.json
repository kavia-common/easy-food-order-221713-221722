{"is_source_file": true, "format": "TypeScript", "description": "This file defines a TypeScript module for fetching and mock-generating analytics data related to food ordering, including daily sales, peak hours, and top items. It includes functions to retrieve data from an API or fallback to mock data, employs caching, and exports public interface functions for use in other parts of the frontend application.", "external_files": ["./runtimeConfig", "@/types/analytics"], "external_methods": ["getApiBase"], "published": ["getDailySales", "getPeakHours", "getTopItems", "getSummary"], "classes": [], "methods": [{"name": "getDailySales", "description": "Fetches daily sales data for a specified date range, either from an API or mock data with caching."}, {"name": "export async function getPeakHours(range: DateRange): Promise<PeakHourPoint[]> { getPeakHours", "description": "Fetches peak hour data for a specified date range, either from an API or mock data with caching.", "scope": "", "scopeKind": ""}, {"name": "export async function getTopItems(range: DateRange): Promise<TopItem[]> { getTopItems", "description": "Fetches top ordered items for a specified date range, either from an API or mock data with caching.", "scope": "", "scopeKind": ""}, {"name": "export async function getSummary(range: DateRange): Promise<AnalyticsSummary> { getSummary", "description": "Fetches a combined analytics summary (daily sales, peak hours, top items) for a specified date range.", "scope": "", "scopeKind": ""}, {"name": "function daysBack(n: number): string[] { daysBack", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function key(parts: Record<string, unknown>): CacheKey { key", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function mockDaily(range: DateRange): DailySalesPoint[] { mockDaily", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function mockPeak(range: DateRange): PeakHourPoint[] { mockPeak", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function rand(min: number, max: number) { rand", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function shouldUseMock(): boolean { shouldUseMock", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "getApiBase"], "search-terms": ["analytics", "daily-sales", "peak-hours", "top-items", "mock data", "caching", "TypeScript", "food ordering"], "state": 2, "file_id": 50, "knowledge_revision": 222, "git_revision": "", "ctags": [{"_type": "tag", "name": "CacheKey", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^type CacheKey = string$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^      const base = (h >= 11 && h <= 14) || (h >= 18 && h <= 21) ? 6 : 2$/", "language": "TypeScript", "kind": "constant", "scope": "mockPeak", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const cached = memCache.get(k)$/", "language": "TypeScript", "kind": "constant", "scope": "getPeakHours", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const cached = memCache.get(k)$/", "language": "TypeScript", "kind": "constant", "scope": "getTopItems", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const cached = memCache.get(k)$/", "language": "TypeScript", "kind": "constant", "scope": "mockPeak", "scopeKind": "function"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^    const d = new Date(today)$/", "language": "TypeScript", "kind": "constant", "scope": "daysBack", "scopeKind": "function"}, {"_type": "tag", "name": "dailySales", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const [dailySales, peakHours, topItems] = await Promise.all([$/", "language": "TypeScript", "kind": "constant", "scope": "getSummary", "scopeKind": "function"}, {"_type": "tag", "name": "dates", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const dates = daysBack(range)$/", "language": "TypeScript", "kind": "constant", "scope": "mockDaily", "scopeKind": "function"}, {"_type": "tag", "name": "daysBack", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^function daysBack(n: number): string[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getPeakHours", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^export async function getPeakHours(range: DateRange): Promise<PeakHourPoint[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getSummary", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^export async function getSummary(range: DateRange): Promise<AnalyticsSummary> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getTopItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^export async function getTopItems(range: DateRange): Promise<TopItem[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const k = key({ t: 'daily', range })$/", "language": "TypeScript", "kind": "constant", "scope": "mockPeak", "scopeKind": "function"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const k = key({ t: 'peak', range })$/", "language": "TypeScript", "kind": "constant", "scope": "getPeakHours", "scopeKind": "function"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const k = key({ t: 'top', range })$/", "language": "TypeScript", "kind": "constant", "scope": "getTopItems", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^function key(parts: Record<string, unknown>): CacheKey {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "memCache", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^const memCache = new Map<CacheKey, Promise<any>>()$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "mockDaily", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^function mockDaily(range: DateRange): DailySalesPoint[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "mockPeak", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^function mockPeak(range: DateRange): PeakHourPoint[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "orders", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^    const orders = rand(12, 90)$/", "language": "TypeScript", "kind": "constant", "scope": "mockDaily", "scopeKind": "function"}, {"_type": "tag", "name": "out", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const out: string[] = []$/", "language": "TypeScript", "kind": "constant", "scope": "daysBack", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "getPeakHours", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "getTopItems", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "mockPeak", "scopeKind": "function"}, {"_type": "tag", "name": "peakHours", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const [dailySales, peakHours, topItems] = await Promise.all([$/", "language": "TypeScript", "kind": "constant", "scope": "getSummary", "scopeKind": "function"}, {"_type": "tag", "name": "pts", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const pts: PeakHourPoint[] = []$/", "language": "TypeScript", "kind": "constant", "scope": "mockPeak", "scopeKind": "function"}, {"_type": "tag", "name": "rand", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^function rand(min: number, max: number) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "getPeakHours", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "getTopItems", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "mockPeak", "scopeKind": "function"}, {"_type": "tag", "name": "shouldUseMock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^function shouldUseMock(): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "today", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const today = new Date()$/", "language": "TypeScript", "kind": "constant", "scope": "daysBack", "scopeKind": "function"}, {"_type": "tag", "name": "topItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^  const [dailySales, peakHours, topItems] = await Promise.all([$/", "language": "TypeScript", "kind": "constant", "scope": "getSummary", "scopeKind": "function"}, {"_type": "tag", "name": "totalCents", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^    const totalCents = orders * rand(1200, 2800)$/", "language": "TypeScript", "kind": "constant", "scope": "mockDaily", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^      const url = `${String(base).replace(\\/\\\\\\/+$\\/, '')}\\/analytics\\/daily-sales?range=${range/", "language": "TypeScript", "kind": "constant", "scope": "mockPeak", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^      const url = `${String(base).replace(\\/\\\\\\/+$\\/, '')}\\/analytics\\/peak-hours?range=${range}/", "language": "TypeScript", "kind": "constant", "scope": "getPeakHours", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/analyticsApi.ts", "pattern": "/^      const url = `${String(base).replace(\\/\\\\\\/+$\\/, '')}\\/analytics\\/top-items?range=${range}`$/", "language": "TypeScript", "kind": "constant", "scope": "getTopItems", "scopeKind": "function"}], "hash": "64f18fa99106f97cd2d410102d40c8c6", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/services/analyticsApi.ts", "revision_history": [{"222": ""}]}