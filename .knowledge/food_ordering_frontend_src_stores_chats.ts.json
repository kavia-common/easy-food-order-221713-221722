{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Pinia store for managing chat threads, messages, and real-time updates in a Vue.js application. It includes functions for loading, opening, sending messages, subscribing to threads, and persisting state.", "external_files": ["@/types/chat", "@/services/chatApi"], "external_methods": ["listThreads", "getOrCreateThread", "fetchMessages", "sendMessage", "subscribeToThread"], "published": ["useChatsStore"], "classes": [], "methods": [{"name": "persistDebounced", "description": "Debounced function to persist chat store state to localStorage with a 400ms delay."}, {"name": "loadThreads", "description": "Loads and sorts chat threads, then persists the state."}, {"name": "openThread", "description": "Creates or retrieves a chat thread, fetches messages if needed, subscribes to updates, and marks as read."}, {"name": "send", "description": "Sends a message in the current thread, updates message list and thread metadata, and persists state."}, {"name": "markRead", "description": "Marks a thread as read by setting its unread count to zero."}, {"name": "subscribe", "description": "Subscribes to real-time updates for a thread, handling message, typing, and presence events."}, {"name": "selectThread", "description": "Selects a thread, subscribes to it, and marks it as read."}], "calls": ["listThreads", "getOrCreateThread", "fetchMessages", "sendMessage", "subscribeToThread"], "search-terms": ["Pinia chat store", "Vue chat thread management", "real-time chat subscription", "localStorage persistence", "chat message handling"], "state": 2, "file_id": 42, "knowledge_revision": 277, "git_revision": "ef85c21ea4ed8dfbec99666038bc8f94558191b0", "revision_history": [{"138": ""}, {"162": "f2f4d922f67e5b031c3258a21a1f9e1775cb2620"}, {"193": "ef85c21ea4ed8dfbec99666038bc8f94558191b0"}, {"277": "ef85c21ea4ed8dfbec99666038bc8f94558191b0"}], "ctags": [], "filename": "food_ordering_frontend/src/stores/chats.ts", "format-version": 4, "code-base-name": "https://github.com/kavia-common/easy-food-order-221713-221722.git:kavia-main"}