{"is_source_file": true, "format": "TypeScript", "description": "This file provides mock data handling functions for restaurant inventory management, including inventory status calculation, local storage persistence, and CRUD operations for restaurant and item stock levels.", "external_files": ["@/types/restaurant", "@/types"], "external_methods": [], "published": ["withInventoryDefaults", "loadRestaurants", "saveRestaurants", "getStock", "setStock", "autoUpdateAvailability"], "classes": [], "methods": [{"name": "export function withInventoryDefaults(item: MenuItem): MenuItem { withInventoryDefaults", "description": "Applies default inventory settings and derives item availability based on stock quantities and autoStock flag.", "scope": "", "scopeKind": ""}, {"name": "loadRestaurants", "description": "Loads restaurant data from local storage or seeds new data, applying inventory defaults to each menu item."}, {"name": "export function saveRestaurants(restaurants: Restaurant[]) { saveRestaurants", "description": "Persists the restaurant list into local storage.", "scope": "", "scopeKind": ""}, {"name": "export function getStock(restaurantId: string, itemId: string): number | undefined { getStock", "description": "Retrieves the stock quantity of a specific item at a restaurant.", "scope": "", "scopeKind": ""}, {"name": "export function setStock(restaurantId: string, itemId: string, qty: number): number | undefined / setStock", "description": "Updates the stock quantity for a specific item at a restaurant and persists the change.", "scope": "", "scopeKind": ""}, {"name": "export function autoUpdateAvailability(restaurantId: string, itemId: string): MenuItem | undefin/ autoUpdateAvailability", "description": "Automatically updates the availability status of a menu item based on current inventory.", "scope": "", "scopeKind": ""}, {"name": "function readAll(): Restaurant[] { readAll", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["readAll()", "savedRestaurants()", "JSON.parse()", "safeStorage.get()", "safeStorage.set()"], "search-terms": ["mockData.inventory", "inventory defaults", "localStorage helpers", "inventory status", "restaurant inventory management"], "state": 2, "file_id": 43, "knowledge_revision": 174, "git_revision": "", "revision_history": [{"167": ""}, {"173": ""}, {"174": ""}], "ctags": [{"_type": "tag", "name": "STORAGE_KEYS", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^const STORAGE_KEYS = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const all = readAll()$/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const all = readAll()$/", "language": "TypeScript", "kind": "constant", "scope": "getStock", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const all = readAll()$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "autoStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const autoStock = item.autoStock ?? true$/", "language": "TypeScript", "kind": "constant", "scope": "withInventoryDefaults", "scopeKind": "function"}, {"_type": "tag", "name": "autoUpdateAvailability", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^export function autoUpdateAvailability(restaurantId: string, itemId: string): MenuItem | undefin/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "const", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^const STORAGE_KEYS = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const current: MenuItem = withMenu.menu[mIdx]$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "getStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^export function getStock(restaurantId: string, itemId: string): number | undefined {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const idx = all.findIndex((x) => x.id === restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const idx = all.findIndex((x) => x.id === restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const withMenu = all[idx] as unknown as Restaurant & { menu?: MenuItem[] }$/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const withMenu = all[idx] as unknown as Restaurant & { menu?: MenuItem[] }$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const item: MenuItem | undefined = r?.menu?.find((i) => i.id === itemId)$/", "language": "TypeScript", "kind": "constant", "scope": "getStock", "scopeKind": "function"}, {"_type": "tag", "name": "lowStockThreshold", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const lowStockThreshold = item.lowStockThreshold ?? 5$/", "language": "TypeScript", "kind": "constant", "scope": "withInventoryDefaults", "scopeKind": "function"}, {"_type": "tag", "name": "mIdx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const current: MenuItem = withMenu.menu[mIdx]$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "mIdx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const mIdx = withMenu.menu?.findIndex((i) => i.id === itemId) ?? -1$/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "mIdx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const mIdx = withMenu.menu?.findIndex((i) => i.id === itemId) ?? -1$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "newR", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const newR = { ...(withMenu as unknown as Record<string, unknown>), menu: [...withMenu.menu.sl/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "newR", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const newR = { ...(withMenu as unknown as Record<string, unknown>), menu: [...withMenu.menu.sl/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const next = [...all.slice(0, idx), newR, ...all.slice(idx + 1)]$/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const next = [...all.slice(0, idx), newR, ...all.slice(idx + 1)]$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "r", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const r = all.find((x) => x.id === restaurantId) as (Restaurant & { menu?: MenuItem[] }) | und/", "language": "TypeScript", "kind": "constant", "scope": "getStock", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const raw = safeStorage.get(STORAGE_KEYS.RESTAURANTS)$/", "language": "TypeScript", "kind": "constant", "scope": "readAll", "scopeKind": "function"}, {"_type": "tag", "name": "readAll", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^function readAll(): Restaurant[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "safeStorage", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^const safeStorage = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "saveRestaurants", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^export function saveRestaurants(restaurants: Restaurant[]) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "seeded", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const seeded = baseRestaurants.map((r) => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "setStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^export function setStock(restaurantId: string, itemId: string, qty: number): number | undefined /", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "stockQuantity", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const stockQuantity = item.stockQuantity ?? 12$/", "language": "TypeScript", "kind": "constant", "scope": "withInventoryDefaults", "scopeKind": "function"}, {"_type": "tag", "name": "true", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const autoStock = item.autoStock ?? true$/", "language": "TypeScript", "kind": "constant", "scope": "withInventoryDefaults", "scopeKind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const updated = withInventoryDefaults(withMenu.menu[mIdx])$/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const updated = withInventoryDefaults({ ...current, stockQuantity: Math.max(0, Math.floor(qty)/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}, {"_type": "tag", "name": "withInventoryDefaults", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^export function withInventoryDefaults(item: MenuItem): MenuItem {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "withMenu", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const withMenu = all[idx] as unknown as Restaurant & { menu?: MenuItem[] }$/", "language": "TypeScript", "kind": "constant", "scope": "autoUpdateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "withMenu", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/mockData.inventory.ts", "pattern": "/^  const withMenu = all[idx] as unknown as Restaurant & { menu?: MenuItem[] }$/", "language": "TypeScript", "kind": "constant", "scope": "setStock", "scopeKind": "function"}], "hash": "bba47075a53532f82651c673379e3304", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/services/mockData.inventory.ts"}