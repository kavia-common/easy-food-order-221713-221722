{"is_source_file": true, "format": "TypeScript", "description": "This file provides a comprehensive API layer for a food ordering frontend. It includes functions to fetch restaurant data, menu items, categories, handle mock data versus real API interactions, manage caches, order creation, inventory management, and menu editing. It references types and mock data modules and exposes methods for client-server communication.", "external_files": ["@/types", "@/types/restaurantProfile", "@/types/restaurant", "./mockData", "./mockData.inventory", "./ordersApi"], "external_methods": ["getMockCategoriesForRestaurant", "getMockItems", "getMockItemById", "mockRestaurants", "loadRestaurants as invLoad", "getStock as invGet", "setStock as invSet", "autoUpdateAvailability as invAuto", "withInventoryDefaults as invDefaults"], "published": ["invalidateCaches", "fetchCategories", "fetchItems", "fetchItemById", "getStock", "setStock", "reserveLocal", "getDisplayStock", "createOrder", "submitOrder", "fetchRestaurantProfile", "fetchRestaurants", "listMenuItems", "createMenuItem", "updateMenuItem", "updateAvailability", "featureFlags"], "classes": [], "methods": [{"name": "function isValidBaseUrl(v: unknown): v is string { isValidBaseUrl", "description": "Validates if a given value is a proper URL string.", "scope": "", "scopeKind": ""}, {"name": "export function getApiBase(): string | undefined { getApiBase", "description": "Retrieves the API base URL from environment variables if valid.", "scope": "", "scopeKind": ""}, {"name": "function getFlags(): Record<string, boolean> { getFlags", "description": "Parses feature flags from environment variables.", "scope": "", "scopeKind": ""}, {"name": "shouldUseMock", "description": "Determines if the application should use mock data based on environment flags."}, {"name": "export function invalidateCaches(scope?: 'all' | 'items' | 'restaurants' | 'categories' | 'profi/ invalidateCaches", "description": "Clears specific or all cached data to force re-fetching.", "scope": "", "scopeKind": ""}, {"name": "function itemsKey(params: { categoryId?: string; search?: string; restaurantId?: string; healthF/ itemsKey", "description": "Generates a cache key for items based on query parameters.", "scope": "", "scopeKind": ""}, {"name": "function restaurantsKey(query: RestaurantQuery = {}) { restaurantsKey", "description": "Generates a cache key for restaurant queries.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchCategories(restaurantId?: string): Promise<FoodCategory[]> { fetchCategories", "description": "Fetches categories for a restaurant, with cache support.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchItems( fetchItems", "description": "Fetches menu items based on filters, with cache support.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchItemById(itemId: string, restaurantId?: string): Promise<FoodItem | n/ fetchItemById", "description": "Fetches a specific item by ID, supports caching.", "scope": "", "scopeKind": ""}, {"name": "export async function createOrder(payload: OrderPayload): Promise<OrderResponse> { createOrder", "description": "Creates an order, handling mock or real API, updates inventory in mock.", "scope": "", "scopeKind": ""}, {"name": "submitOrder", "description": "Alias for createOrder, submits an order."}, {"name": "export async function fetchRestaurantProfile(restaurantId: string): Promise<RestaurantProfile> { fetchRestaurantProfile", "description": "Fetches profile info for a restaurant (mocked).", "scope": "", "scopeKind": ""}, {"name": "export async function fetchRestaurants(query: RestaurantQuery = {}): Promise<Restaurant[]> { fetchRestaurants", "description": "Retrieves list of restaurants, with optional filtering.", "scope": "", "scopeKind": ""}, {"name": "export async function listMenuItems(restaurantId: string): Promise<CustomerItem[]> { listMenuItems", "description": "Lists menu items for a restaurant.", "scope": "", "scopeKind": ""}, {"name": "export async function createMenuItem( createMenuItem", "description": "Creates a new menu item for a restaurant.", "scope": "", "scopeKind": ""}, {"name": "updateMenuItem", "description": "Updates an existing menu item."}, {"name": "updateAvailability", "description": "Updates availability status of a menu item."}, {"name": "function applyClientSide(list: Restaurant[], query: RestaurantQuery) { applyClientSide", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function applyDefaultAvailability(item: CustomerItem): CustomerItem { applyDefaultAvailability", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function attachMenusToRestaurants(base: Restaurant[]): Restaurant[] { attachMenusToRestaurants", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function fetchWithTimeout(input: RequestInfo | URL, init?: RequestInit & { timeoutMs?: num/ fetchWithTimeout", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function findRestaurantAndItem(rests: Restaurant[], itemId: string): { restaurantId: string; ite/ findRestaurantAndItem", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function getDisplayStock(restaurantId: string, itemId: string) { getDisplayStock", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function getStock(restaurantId: string, itemId: string) { getStock", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function mockOrderSuccess(): Promise<OrderResponse> { mockOrderSuccess", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async function readCustomerMenu(restaurantId: string): Promise<CustomerItem[]> { readCustomerMenu", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function reserveLocal(restaurantId: string, itemId: string, qty = 1) { reserveLocal", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "loadRestaurants", "getMockCategoriesForRestaurant", "getMockItems", "getMockItemById", "invLoad", "invGet", "invSet", "invAuto", "invDefaults"], "search-terms": ["api.ts", "mockData", "inventory", "restaurant", "menu", "order", "cache", "mock", "fetch", "inventory management", "menu editing"], "state": 2, "file_id": 19, "knowledge_revision": 218, "git_revision": "8dc8af5048045f40d11bafb2aacf41198d73dafe", "revision_history": [{"41": ""}, {"49": "fa51b25a5136c2a213cbe729e4337be0c6b04b4d"}, {"50": "fa51b25a5136c2a213cbe729e4337be0c6b04b4d"}, {"53": "080dcebf5014d88192e81b4b55bca22f8703ca31"}, {"54": "080dcebf5014d88192e81b4b55bca22f8703ca31"}, {"57": "35883df6824081e2e752a88ef30ca7139d55531b"}, {"59": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"60": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"61": "2779e9974b574824b22ec1ba11b571a788f48888"}, {"72": "7d8d49548b0644d9213c7461f95715f9a2629b00"}, {"73": "7d8d49548b0644d9213c7461f95715f9a2629b00"}, {"85": "410e1f03e40348cb83039a8db9b0f1f0046cad67"}, {"109": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"110": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"111": "6e54681faac87e0a9d70cc3e42fc4f1b384a3811"}, {"115": "e506a7250757c6c020275949ac7a902f4831d2be"}, {"153": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"154": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"156": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"157": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"160": "70569db63a9407628ce40da9eb51b9bf47307f2f"}, {"168": "705df92d392b8a455258cec559766c654947ff8b"}, {"171": "705df92d392b8a455258cec559766c654947ff8b"}, {"172": "705df92d392b8a455258cec559766c654947ff8b"}, {"175": "791f9e66f557ef246118dcf8e1a9d6366df44311"}, {"176": "791f9e66f557ef246118dcf8e1a9d6366df44311"}, {"177": "791f9e66f557ef246118dcf8e1a9d6366df44311"}, {"218": "8dc8af5048045f40d11bafb2aacf41198d73dafe"}], "ctags": [{"_type": "tag", "name": "LS_KEYS", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const LS_KEYS = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "a", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const av = key === 'price' ? a.priceLevel : key === 'distance' ? a.distanceKm : a.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "applyClientSide", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function applyClientSide(list: Restaurant[], query: RestaurantQuery) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "applyDefaultAvailability", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function applyDefaultAvailability(item: CustomerItem): CustomerItem {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "attachMenusToRestaurants", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function attachMenusToRestaurants(base: Restaurant[]): Restaurant[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "av", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const av = key === 'price' ? a.priceLevel : key === 'distance' ? a.distanceKm : a.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "b", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const bv = key === 'price' ? b.priceLevel : key === 'distance' ? b.distanceKm : b.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const base = invLoad(attachMenusToRestaurants(mockRestaurants))$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = getApiBase()$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const base = import.meta.env.VITE_API_BASE || import.meta.env.VITE_BACKEND_URL$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBase", "scopeKind": "function"}, {"_type": "tag", "name": "baseUrl", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const baseUrl = restaurantId$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "bv", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const bv = key === 'price' ? b.priceLevel : key === 'distance' ? b.distanceKm : b.rating$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "c", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const c = String(query.cuisine).toLowerCase()$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "cache", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const cache = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.categoriesByRestaurant.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.itemByKey.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.itemsByKey.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "cached", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const cached = cache.restaurantsByQuery.get(key)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "controller", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const controller = new AbortController()$/", "language": "TypeScript", "kind": "constant", "scope": "fetchWithTimeout", "scopeKind": "function"}, {"_type": "tag", "name": "createMenuItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function createMenuItem($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "createOrder", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function createOrder(payload: OrderPayload): Promise<OrderResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const current = invGet(restaurantId, itemId) ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "dir", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const dir = query.sortDir === 'asc' ? 1 : -1$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "enriched", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const enriched = invDefaults(item as any)$/", "language": "TypeScript", "kind": "constant", "scope": "applyDefaultAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "featureFlags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export const featureFlags = flags$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "fetchCategories", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchCategories(restaurantId?: string): Promise<FoodCategory[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchItemById", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchItemById(itemId: string, restaurantId?: string): Promise<FoodItem | n/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchItems($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchRestaurantProfile", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchRestaurantProfile(restaurantId: string): Promise<RestaurantProfile> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchRestaurants", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function fetchRestaurants(query: RestaurantQuery = {}): Promise<Restaurant[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fetchWithTimeout", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^async function fetchWithTimeout(input: RequestInfo | URL, init?: RequestInit & { timeoutMs?: num/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "findRestaurantAndItem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function findRestaurantAndItem(rests: Restaurant[], itemId: string): { restaurantId: string; ite/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const forced = typeof flags.enableMockAPI === 'boolean' ? flags.enableMockAPI : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "flags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const flags = getFlags()$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "flagsRaw", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const flagsRaw = import.meta.env.VITE_FEATURE_FLAGS$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "forced", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const forced = typeof flags.enableMockAPI === 'boolean' ? flags.enableMockAPI : undefined$/", "language": "TypeScript", "kind": "constant", "scope": "shouldUseMock", "scopeKind": "function"}, {"_type": "tag", "name": "found", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const found = findRestaurantAndItem(base, line.id)$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function getApiBase(): string | undefined {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getDisplayStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function getDisplayStock(restaurantId: string, itemId: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getFlags", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function getFlags(): Record<string, boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getStock", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function getStock(restaurantId: string, itemId: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const id = typeof crypto !== 'undefined' && 'randomUUID' in crypto ? crypto.randomUUID() : `${/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const idx = list.findIndex(i => i.id === itemId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const idx = list.findIndex(i => i.id === itemId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "invalidateCaches", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function invalidateCaches(scope?: 'all' | 'items' | 'restaurants' | 'categories' | 'profi/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "isValidBaseUrl", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function isValidBaseUrl(v: unknown): v is string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const item: CustomerItem = applyDefaultAvailability({$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list, item]$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "itemId", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const { restaurantId, itemId } = found$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const items: CustomerItem[] = JSON.parse(raw)$/", "language": "TypeScript", "kind": "constant", "scope": "attachMenusToRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "itemsKey", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function itemsKey(params: { categoryId?: string; search?: string; restaurantId?: string; healthF/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "k", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const [k, v] = kv.split('=')$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const key = query.sortBy$/", "language": "TypeScript", "kind": "constant", "scope": "applyClientSide", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `${restaurantId || ''}::${itemId}`$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `${restaurantId}:${itemId}`$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = `${restaurantId}:${itemId}`$/", "language": "TypeScript", "kind": "constant", "scope": "reserveLocal", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = itemsKey({ categoryId, search, restaurantId, healthFilters: options?.healthFilters/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const key = restaurantsKey(query)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "key", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const reserved = localReservations[key] ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "line", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    for (const line of payload.items) {$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const list = await readCustomerMenu(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "listMenuItems", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export async function listMenuItems(restaurantId: string): Promise<CustomerItem[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "localReservations", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^const localReservations: Record<string, number> = {}$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "mem", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const mem = cache.customerMenuByRestaurant.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "menu", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const menu: CustomerItem[] | undefined = r.menu$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "mockOrderSuccess", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^async function mockOrderSuccess(): Promise<OrderResponse> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list, item]$/", "language": "TypeScript", "kind": "constant", "scope": "createMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list]$/", "language": "TypeScript", "kind": "constant", "scope": "updateAvailability", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const next = [...list]$/", "language": "TypeScript", "kind": "constant", "scope": "updateMenuItem", "scopeKind": "function"}, {"_type": "tag", "name": "obj", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const obj: Record<string, boolean> = {}$/", "language": "TypeScript", "kind": "constant", "scope": "getFlags", "scopeKind": "function"}, {"_type": "tag", "name": "origin", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const origin = typeof window !== 'undefined' ? window.location.origin : 'http:\\/\\/localhos/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = (async () => {$/", "language": "TypeScript", "kind": "constant", "scope": "readCustomerMenu", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = Promise.resolve(applyClientSide(mockRestaurants, query))$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const p = cache.profileById.get(restaurantId)$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const q = Promise.resolve({$/", "language": "TypeScript", "kind": "constant", "scope": "fetchRestaurantProfile", "scopeKind": "function"}, {"_type": "tag", "name": "r", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  for (const r of rests as unknown as Array<Restaurant & { menu?: CustomerItem[] }>) {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const raw = store.getItem(LS_KEYS.MENU(r.id))$/", "language": "TypeScript", "kind": "constant", "scope": "attachMenusToRestaurants", "scopeKind": "function"}, {"_type": "tag", "name": "readCustomerMenu", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^async function readCustomerMenu(restaurantId: string): Promise<CustomerItem[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "real", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const real = getStock(restaurantId, itemId) ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "fetchCategories", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const res = await fetch(url, { headers: { 'Content-Type': 'application\\/json' } })$/", "language": "TypeScript", "kind": "constant", "scope": "fetchItems", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^      const res = await fetchWithTimeout(url, { headers: { 'Content-Type': 'application\\/json' }/", "language": "TypeScript", "kind": "constant", "scope": "fetchItemById", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const res = await fetch(`${String(base).replace(\\/\\\\\\/*$\\/, '')}\\/orders`, {$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^    const res = await fetch(input, { ...init, signal: controller.signal })$/", "language": "TypeScript", "kind": "constant", "scope": "fetchWithTimeout", "scopeKind": "function"}, {"_type": "tag", "name": "reserveLocal", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^export function reserveLocal(restaurantId: string, itemId: string, qty = 1) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "reserved", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const reserved = localReservations[key] ?? 0$/", "language": "TypeScript", "kind": "constant", "scope": "getDisplayStock", "scopeKind": "function"}, {"_type": "tag", "name": "restaurantId", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^        const { restaurantId, itemId } = found$/", "language": "TypeScript", "kind": "constant", "scope": "createOrder", "scopeKind": "function"}, {"_type": "tag", "name": "restaurantsKey", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^function restaurantsKey(query: RestaurantQuery = {}) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/services/api.ts", "pattern": "/^  const s = scope || 'all'$/", "language": "TypeScript", "kind": "constant", "scope": "invalidateCaches", "scopeKind": "function"}], "hash": "d36b7502eee065bb6663ce0e426fb696", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/services/api.ts"}