{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Pinia store for managing user subscriptions in a food ordering frontend application. It includes state management, persistence, and actions for subscribing, canceling, and updating subscription perks.", "external_files": ["@/services/subscriptionsApi", "@/types/subscriptions"], "external_methods": ["cancelSubscription", "getCurrentSubscription", "getPerks", "listPlans", "subscribe"], "published": ["useSubscriptionsStore"], "classes": [], "methods": [{"name": "init", "description": "Initializes the store by loading snapshot and fetching plans and subscription status."}, {"name": "loadPlans", "description": "Fetches available subscription plans from API."}, {"name": "loadStatus", "description": "Fetches current user subscription status from API."}, {"name": "subscribeTo", "description": "Subscribes user to a plan with optimistic UI update and error rollback."}, {"name": "cancel", "description": "Cancels current subscription with optimistic UI update and error rollback."}, {"name": "refreshPerks", "description": "Refreshes subscription perks from API."}, {"name": "consumeMealCredits", "description": "Consumes meal plan credits, updating remaining credits."}, {"name": "getSavingsLine", "description": "Returns current savings details for display."}], "calls": ["listPlans", "getCurrentSubscription", "subscribe", "cancelSubscription", "getPerks"], "search-terms": ["pinia store", "subscriptions management", "localStorage snapshot", "subscribe", "cancel", "perks", "meal credits"], "state": 2, "file_id": 37, "knowledge_revision": 283, "git_revision": "222638623460685c384db599cd7b795a0c3616d8", "revision_history": [{"124": ""}, {"129": ""}, {"130": ""}, {"283": "222638623460685c384db599cd7b795a0c3616d8"}], "ctags": [], "filename": "food_ordering_frontend/src/stores/subscriptions.ts", "format-version": 4, "code-base-name": "https://github.com/kavia-common/easy-food-order-221713-221722.git:kavia-main"}