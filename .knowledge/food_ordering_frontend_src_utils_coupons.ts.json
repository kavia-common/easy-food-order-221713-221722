{"is_source_file": true, "format": "TypeScript", "description": "This file defines types, utility functions, and mock data related to coupons in a food ordering application. It includes types for Coupon and CouponType, functions for coupon validation and discount calculation, and a mock coupon list.", "external_files": [], "external_methods": [], "published": ["CouponType", "Coupon", "isExpired", "meetsMinSpend", "calcDiscount", "clampCurrency", "mockCoupons", "findCouponByCode", "validateCoupon"], "classes": [], "methods": [{"name": "export function isExpired(coupon: Coupon, now: Date = new Date()): boolean { isExpired", "description": "Checks if a given coupon has expired based on its expiry date, defaulting to current date.", "scope": "", "scopeKind": ""}, {"name": "meetsMinSpend", "description": "Verifies if the subtotal meets the minimum spend requirement for the coupon."}, {"name": "export function calcDiscount(coupon: Coupon | null, subtotal: number): number { calcDiscount", "description": "Calculates the discount amount based on the coupon type and subtotal.", "scope": "", "scopeKind": ""}, {"name": "clampCurrency", "description": "Rounds a number to two decimal places suitable for currency and avoids negative zero."}, {"name": "findCouponByCode", "description": "Searches for a coupon in the mock list by its code, case-insensitive."}, {"name": "export function validateCoupon(coupon: Coupon, subtotal: number, now: Date = new Date()): string/ validateCoupon", "description": "Validates whether a coupon can be applied, checking for expiration and minimum spend.", "scope": "", "scopeKind": ""}], "calls": ["isNaN", "exp.getTime", "now.getTime", "clampCurrency", "find", "toUpperCase", "toFixed"], "search-terms": ["CouponType", "coupons.ts", "calcDiscount", "findCouponByCode", "validateCoupon"], "state": 2, "file_id": 24, "knowledge_revision": 68, "git_revision": "", "ctags": [{"_type": "tag", "name": "Coupon", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export type Coupon = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "CouponType", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export type CouponType = 'percent' | 'flat' | 'freeship'$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "calcDiscount", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function calcDiscount(coupon: Coupon | null, subtotal: number): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "exp", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^  const exp = new Date(coupon.expiresAt)$/", "language": "TypeScript", "kind": "constant", "scope": "isExpired", "scopeKind": "function"}, {"_type": "tag", "name": "isExpired", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function isExpired(coupon: Coupon, now: Date = new Date()): boolean {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "ms", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^    const ms = coupon.minSpend?.toFixed(2)$/", "language": "TypeScript", "kind": "constant", "scope": "validateCoupon", "scopeKind": "function"}, {"_type": "tag", "name": "validateCoupon", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function validateCoupon(coupon: Coupon, subtotal: number, now: Date = new Date()): string/", "language": "TypeScript", "kind": "function"}], "hash": "0fdd2c6c1ab5dd3033c8fa6ad7224f69", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/utils/coupons.ts", "revision_history": [{"68": ""}]}