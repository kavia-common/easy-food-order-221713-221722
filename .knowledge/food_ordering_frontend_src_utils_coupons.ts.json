{"is_source_file": true, "format": "TypeScript", "description": "This file provides utility functions and types related to coupons within a food ordering frontend application. It includes functions for currency calculations, applying discounts, and coupon validation.", "external_files": [], "external_methods": [], "published": ["toCurrency", "clampCurrency", "applyPercentage", "applyFixed", "calcDiscount", "applyCoupon", "validateCoupon", "findCouponByCode", "Coupon"], "classes": [], "methods": [{"name": "export function toCurrency(value: number): number { toCurrency", "description": "Converts a number to a two-decimal currency format, avoiding negative zero.", "scope": "", "scopeKind": ""}, {"name": "export function clampCurrency(value: number): number { clampCurrency", "description": "Clamps a value to two decimal places and ensures it is not below zero.", "scope": "", "scopeKind": ""}, {"name": "export function applyPercentage(value: number, percent: number): number { applyPercentage", "description": "Calculates the discount amount based on a percentage.", "scope": "", "scopeKind": ""}, {"name": "export function applyFixed(value: number, amountOff: number): number { applyFixed", "description": "Calculates the discount amount based on a fixed value.", "scope": "", "scopeKind": ""}, {"name": "export function calcDiscount(subtotal: number, coupon?: Coupon | null): number { calcDiscount", "description": "Calculates total discount for a subtotal based on an optional coupon.", "scope": "", "scopeKind": ""}, {"name": "export function applyCoupon(subtotal: number, coupon?: Coupon | null): number { applyCoupon", "description": "Applies a coupon to a subtotal, returning the new total.", "scope": "", "scopeKind": ""}, {"name": "export function validateCoupon(code: string, available: Coupon[]): Coupon | null { validateCoupon", "description": "Validates a coupon code against available coupons, returning the coupon or null.", "scope": "", "scopeKind": ""}, {"name": "export function findCouponByCode(code: string, available: Coupon[]): Coupon | null { findCouponByCode", "description": "Finds a coupon by code, case-insensitive, from available coupons.", "scope": "", "scopeKind": ""}], "calls": ["Math.round", "Object.is", "Math.max", "Math.min", "available.find", "available.find"], "search-terms": ["coupon", "discount", "applyCoupon", "validateCoupon", "coupons.ts"], "state": 2, "file_id": 24, "knowledge_revision": 146, "git_revision": "cf147ccfbaa9c81ba6b561ab246528cdc11c70ac", "revision_history": [{"68": ""}, {"144": "cf147ccfbaa9c81ba6b561ab246528cdc11c70ac"}, {"146": "cf147ccfbaa9c81ba6b561ab246528cdc11c70ac"}], "ctags": [{"_type": "tag", "name": "Coupon", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export type Coupon =$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "applyCoupon", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function applyCoupon(subtotal: number, coupon?: Coupon | null): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "applyFixed", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function applyFixed(value: number, amountOff: number): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "applyPercentage", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^    const discounted = subtotal - applyPercentage(subtotal, coupon.value);$/", "language": "TypeScript", "kind": "constant", "scope": "calcDiscount", "scopeKind": "function"}, {"_type": "tag", "name": "applyPercentage", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function applyPercentage(value: number, percent: number): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "c", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^  const c = available.find((c) => c.code.toLowerCase() === code.trim().toLowerCase());$/", "language": "TypeScript", "kind": "constant", "scope": "validateCoupon", "scopeKind": "function"}, {"_type": "tag", "name": "calcDiscount", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function calcDiscount(subtotal: number, coupon?: Coupon | null): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "clampCurrency", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function clampCurrency(value: number): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "discounted", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^    const discounted = subtotal - applyPercentage(subtotal, coupon.value);$/", "language": "TypeScript", "kind": "constant", "scope": "calcDiscount", "scopeKind": "function"}, {"_type": "tag", "name": "findCouponByCode", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function findCouponByCode(code: string, available: Coupon[]): Coupon | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^  const n = Math.round(value * 100) \\/ 100;$/", "language": "TypeScript", "kind": "constant", "scope": "toCurrency", "scopeKind": "function"}, {"_type": "tag", "name": "toCurrency", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function toCurrency(value: number): number {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "validateCoupon", "path": "/home/kavia/workspace/code-generation/easy-food-order-221713-221722/food_ordering_frontend/src/utils/coupons.ts", "pattern": "/^export function validateCoupon(code: string, available: Coupon[]): Coupon | null {$/", "language": "TypeScript", "kind": "function"}], "hash": "20ebbd8a5e788e020e6f846fe985a55c", "format-version": 4, "code-base-name": "food_ordering_frontend", "filename": "food_ordering_frontend/src/utils/coupons.ts"}